<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:ui="jakarta.faces.facelets">
<h:head>
  <title>Top Selling</title>
  <h:outputStylesheet library="styles" name="main.css" />
</h:head>

<h:body>
  <div class="app">
    <div class="card">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3>Productos más vendidos por mes</h3>
        <div class="actions">
          <h:button value="Inicio" outcome="index.xhtml" styleClass="btn ghost" />
          <button type="button" onclick="history.back()" class="btn secondary">Atrás</button>
        </div>
      </div>

      <h:form id="repForm">
        <div class="form-row">
          <div class="field">
            <label>Mes</label>
            <h:selectOneMenu value="#{reporteBean.mes}" styleClass="btn">
              <f:selectItem itemLabel="Seleccione un mes" itemValue="" />
              <f:selectItem itemLabel="Enero" itemValue="1" />
              <f:selectItem itemLabel="Febrero" itemValue="2" />
              <f:selectItem itemLabel="Marzo" itemValue="3" />
              <f:selectItem itemLabel="Abril" itemValue="4" />
              <f:selectItem itemLabel="Mayo" itemValue="5" />
              <f:selectItem itemLabel="Junio" itemValue="6" />
              <f:selectItem itemLabel="Julio" itemValue="7" />
              <f:selectItem itemLabel="Agosto" itemValue="8" />
              <f:selectItem itemLabel="Septiembre" itemValue="9" />
              <f:selectItem itemLabel="Octubre" itemValue="10" />
              <f:selectItem itemLabel="Noviembre" itemValue="11" />
              <f:selectItem itemLabel="Diciembre" itemValue="12" />
            </h:selectOneMenu>
          </div>

          <div style="display:flex; align-items:flex-end; gap:8px;">
            <h:commandButton value="Generar" action="#{reporteBean.generar}" styleClass="btn" />
          </div>
        </div>

        <h:messages id="messages" />

        <div id="tableArea" style="margin-top:12px;">
          <h:panelGroup rendered="#{not empty reporteBean.resultados}">
            <h:dataTable value="#{reporteBean.resultados}" var="r" styleClass="table">
              <h:column>
                <f:facet name="header">Producto</f:facet>
                #{r.nombre}
              </h:column>
              <h:column>
                <f:facet name="header">Ventas</f:facet>
                #{r.totalVendido}
              </h:column>
            </h:dataTable>
          </h:panelGroup>

          <h:panelGroup rendered="#{empty reporteBean.resultados}">
            <div class="notice">No hay datos disponibles para el mes ingresado.</div>
          </h:panelGroup>
        </div>
      </h:form>
    </div>
  </div>
</h:body>
</html>
